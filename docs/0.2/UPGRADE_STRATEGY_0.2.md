# "Lighthouse" 0.2 版本升级战略规划

本文档旨在概述文献解析后端服务从 0.1 版本升级到 0.2 "Lighthouse" 版本的核心战略和关键决策点。

## 1. 核心目标

将系统从一个**单点文献解析工具**升级为一个**智能文献知识图谱**，核心是实现文献间引用关系的解析与查询。

## 2. 核心战略：平滑迁移 (Smooth Migration)

我们采用分阶段、兼容旧版的升级策略，确保在引入重大新功能的同时，服务的稳定性和连续性不受影响。

## 3. 升级阶段与关键决策点

### 第一阶段：核心概念升级

*   **目标**: 引入 `LID` (文献全局唯一ID) 和 `Alias` (文献别名) 两个核心概念，为构建知识图谱奠定数据基础。
*   **关键行动**:
    1.  为 `literatures` 集合添加 `lid` 字段。
    2.  创建独立的 `aliases` 集合，用于映射外部标识符 (DOI, URL) 到内部LID。
*   **⚠️ 需确认决策点**:
    *   **LID生成策略**: 应采用何种规则生成LID（例如：`年份-期刊-哈希`）？这需要讨论并最终确定一个统一标准。

### 第二阶段：引用关系图谱构建

*   **目标**: 实现版本的核心新功能——解析并存储文献间的引用关系。
*   **关键行动**:
    1.  扩展 `references` 数据模型，使其能关联到被引用文献的LID。
    2.  开发新的后台任务 `resolve_references_task`，负责在文献解析后，处理其参考文献列表，并建立引用链接。
*   **⚠️ 需确认决策点**:
    *   **引用匹配策略**: 如何高效、准确地通过非结构化的引用文本（如 "作者, 标题, 年份"）在数据库中找到对应的LID？需要设计一套匹配算法。

### 第三阶段：新API架构上线

*   **目标**: 推出更清晰、更强大的新版API，同时兼容旧版接口。
*   **关键行动**:
    1.  实现核心入口 `POST /api/resolve`。
    2.  实现数据查询 `GET /api/literatures` 和关系查询 `GET /api/graphs`。
    3.  将旧API（如 `POST /api/literature`）标记为“弃用(deprecated)”。
*   **⚠️ 需确认决策点**:
    *   **关系图数据结构**: `GET /api/graphs` 接口应返回何种格式的数据来描述图谱（例如：节点列表+边列表，邻接矩阵）？

## 4. 总结

此计划将复杂的升级任务分解为三个可管理、可验证的阶段。在每个阶段的关键节点，我们会与您确认具体方案，确保最终实现符合预期。
